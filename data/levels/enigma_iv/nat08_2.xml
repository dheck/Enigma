<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
  <el:protected>
    <el:info el:type="level">
      <el:identity el:title="Flood Gates" el:subtitle="" el:id="nat8"/>
      <el:version el:score="1" el:release="2" el:revision="1" el:status="released"/>
      <el:author  el:name="Nat Pryce" el:email="" el:homepage=""/>
      <el:copyright>Copyright Â© 2002 Nat Pryce</el:copyright>
      <el:license el:type="GPL v2.0 or above" el:open="true"/>
      <el:compatibility el:enigma="1.10"/>
      <el:modes el:easy="false" el:single="true" el:network="false"/>
      <el:comments><el:code>New API converted by R. Bourquin</el:code></el:comments>
      <el:score el:easy="-" el:difficult="-"/>
    </el:info>
    <el:luamain><![CDATA[
wo["ConserveLevel"] = false

ti["  "] = {"fl_lawn"}
ti["~~"] = {"fl_water_source", interval=0.1}
ti["::"] = {"fl_rough", floodable=true}
ti["=="] = {"fl_metal_7"}
ti["##"] = {"st_greenbrown"}
ti["**"] = ti["  "] .. ti["##"]
ti["XX"] = {"st_grate", flavor="cross"}
ti["YY"] = ti["XX"] .. {"fl_abyss", floodable=true}
ti["++"] = ti["  "] .. {"st_box"}
ti["!!"] = {"it_bottle_broken"}
ti["%%"] = ti["XX"] .. {"fl_wood"}
ti["%-"] = ti["XX"] .. {"fl_wood_framed"}
ti["doorh"] = {"st_door", flavor="d", faces="ns", name="door%%"}
ti["doorv"] = {"st_door", flavor="d", faces="ew", name="door%%"}
ti["switch"] = {"st_switch", target="door%%", action="open"}
ti["trigger"] = ti["  "] .. {"it_trigger", target="door%%", action="open"}
ti["oxyd"] = {"st_oxyd", flavor="a", oxydcolor="%%"}
ti["@@"] = ti["=="] .. {"#ac_marble_black"}

local resolver = res.autotile(ti, {"H", "doorh"}, {"V", "doorv"}, {"S", "switch"}, {"t", "trigger"}, {"O", "oxyd"})

wo(resolver, "::", {
    "####################################################~~########################",
    "##::::::::::::::::::::::::::::::::::::::::::::::::Va~~##::::::::::::::::::::##",
    "##::##################################################Sb::::::::::::::::::::##",
    "##::::::::::::::::::::::::::::::::::::::::::::::::::::Vb::::::::::::@@::::::##",
    "******::****##########################################Sa::::::::::::::::::::##",
    "**    ::    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##::::::::::::::::::::##",
    "**    ::    ========~~~~~~==========~~~~~~====        Sc######################",
    "******::****####~~==~~~~~~==~~~~~~==~~~~~~==~~**  ****##::::::::::::::::::::##",
    "##::::::::::::##~~==========~~~~~~==========~~**  **::==================O2::##",
    "##::::::::::::##~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~**  **::==::::::::::::::::::::##",
    "##::::::::::::################################**  **::========::==========::##",
    "##::::::::::::Vc::::::::::::::::::::::::::::::**  **::::::::==::==::::::==::##",
    "##Hd########################################::**  **::========::==::======::##",
    "##::##::::::::::::::::::::::::::::::::::::##::**  **::==::::::::==::==::::::##",
    "##::##::tftftf::::::::::::::::::::::::::::##!!**  **::============::======::##",
    "##::##::tfO2tf::::::::::::::::::::::::::::%%%-%%  **::::::::::::::::::::%-::##",
    "##::##::tftftf::::::::::::::::::::::::::::##!!**++**####################%%!!##",
    "##::##::::::::::::::::::::::::::::::::::::##::::::::::::::::::::::::::!!%-!!##",
    "##::########Hf######********************  ******  **********************%%****",
    "##::tdO1##~~~~~~====                      **O3**                            **",
    "##::######~~~~~~==~~************************tg**************************++****",
    "##::##~~~~~~~~~~==~~**  ::::::::::::::::::::::##Sith  ::::::::::::::::::::::##",
    "##::##~~======~~==~~**  ::                  ::******  ::                  ::##",
    "##::##~~==~~==~~==~~**  ::  ::::::::::::::::::**      ::      ::::::::::  ::##",
    "##::##~~==~~==~~==~~**  ::  ::    ********####**      ::******Hi######::  ::##",
    "Se::Se~~==~~==~~==~~**  ::  ::  ::::  ++  ::::::::    ::##O4::::::O5##::  ::##",
    "Se::Se~~==~~==~~==~~**  ::  ::  ::**  **  **    ::    ::##::::::::::##::  ::##",
    "Se::Se~~==~~==~~==~~**  ::  ::  ::**  **  **    ::    ::##::::O3::::##::  ::##",
    "Se::Se~~==~~==~~==~~**  ::  ::::::**  **  **    ::    ::##::::::::::##::  ::##",
    "Se::Se~~==~~==~~==~~**  ::        **++**++**    ::    ::##O5::::::O4##::  ::##",
    "Se::Se~~==~~======~~**  ::::::::::XX::++::XX::::::    ::##############::  ::##",
    "Se::Ve~~==~~~~~~~~~~**            **::::::**          ::::::::::::::::::  ::##",
    "##::****  **########****************##Hg##************##################**Hh##",
    "##::      **O1::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::YY",
    "##::********##############################################################::##",
    "##::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::YY",
    "##############################################################################"})
 ]]></el:luamain>
    <el:i18n>
      <el:string el:key="title">
        <el:english el:translate="false"/>
      </el:string>
    </el:i18n>
  </el:protected>
</el:level>
